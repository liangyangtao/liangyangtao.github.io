---
layout: post
title: Java线程安全性
category: Java基础
date: 2016-02-07
---

标签： Java 多线程


<!-- more -->

## 定义线程安全性

开发了好久，这个概念一直是模糊的，看了下IBM上的简介，记录下来

类要是线程安全的，首先必须在单线程环境下有正确的行为，即输入和输出和设定的一样。

其次，在被多个线程访问时，不管运行时环境执行这些线程有什么样的实序安排或者交错，他必须有单线程时的正确行为

其效果就是，在所有线程看来，对于线程安全对象的操作是以固定的、全局一致的顺序发生的。

正确性与线程安全性之间的关系非常类似于在描述 ACID(原子性、一致性、独立性和持久性)事务时使用的一致性与独立性之间的关系：从特定线程的角度看，由不同线程所执行的对象操作是先后(虽然顺序不定)而不是并行执行的。

## 线程安全程度

线程安全性不是一个非真即假的命题。

Vector 的方法都是同步的，并且 Vector 明确地设计为在多线程环境中工作。但是它的线程安全性是有限制的，即在某些方法之间有状态依赖(类似地，如果在迭代过程中 Vector 被其他线程修改，那么由 Vector.iterator() 返回的 iterator 会抛出 ConcurrentModificationException )。

对于 Java 类中常见的线程安全性级别，没有一种分类系统可被广泛接受，不过重要的是在编写类时尽量记录下它们的线程安全行为。


## 个人理解

只有多线程之间共享变量会产生线程安全问题，给 static 变量的操作进行加锁处理即可。 synchronized 、lock、 volatile(这个只做判断标识使用)

原文参考：

http://www.ibm.com/developerworks/cn/java/j-jtp09263/





